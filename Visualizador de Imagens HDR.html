<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="http://www.nongnu.org/elyxer/">
<meta name="create-date" content="2021-04-09">
<link rel="stylesheet" href="Visualizador%20de%20Imagens%20HDR_arquivos/lyx.css" type="text/css" media="all">
<link rel="stylesheet" href="Visualizador%20de%20Imagens%20HDR_arquivos/agate.css" type="text/css" media="all">
<script type="text/javascript" src="Visualizador%20de%20Imagens%20HDR_arquivos/highlight.js"></script><script type="text/javascript">hljs.initHighlightingOnLoad();</script><title>Visualizador de Imagens HDR</title>
<script type="text/javascript" src="Visualizador%20de%20Imagens%20HDR_arquivos/MathJax.js">
  //  Load MathJax and get it running
  MathJax.Hub.Config({ jax: ["input/TeX"],
  config: ["MMLorHTML.js"],
  extensions: ["TeX/AMSmath.js","TeX/AMSsymbols.js"],
  "HTML-CSS": { imageFont: null,
      styles: { ".MathJax_Preview": { color: "#000" } } }
  });
</script>
<style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1px; bottom: 2px; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">.MathJax_Display {text-align: center; margin: 1em 0em; position: relative; display: block!important; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%}
.MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MathJax .MJX-monospace {font-family: monospace}
.MathJax .MJX-sans-serif {font-family: sans-serif}
#MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
.MathJax:focus, body :focus .MathJax {display: inline-table}
.MathJax.MathJax_FullWidth {text-align: center; display: table-cell!important; width: 10000em!important}
.MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; vertical-align: 0; line-height: normal; text-decoration: none}
img.MathJax_strut {border: 0!important; padding: 0!important; margin: 0!important; vertical-align: 0!important}
.MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none; box-sizing: content-box}
.MathJax nobr {white-space: nowrap!important}
.MathJax img {display: inline!important; float: none!important}
.MathJax * {transition: none; -webkit-transition: none; -moz-transition: none; -ms-transition: none; -o-transition: none}
.MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MathJax_Processed {display: none!important}
.MathJax_test {font-style: normal; font-weight: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow: hidden; height: 1px}
.MathJax_test.mjx-test-display {display: table!important}
.MathJax_test.mjx-test-inline {display: inline!important; margin-right: -1px}
.MathJax_test.mjx-test-default {display: block!important; clear: both}
.MathJax_ex_box {display: inline-block!important; position: absolute; overflow: hidden; min-height: 0; max-height: none; padding: 0; border: 0; margin: 0; width: 1px; height: 60ex}
.MathJax_em_box {display: inline-block!important; position: absolute; overflow: hidden; min-height: 0; max-height: none; padding: 0; border: 0; margin: 0; width: 1px; height: 60em}
.mjx-test-inline .MathJax_left_box {display: inline-block; width: 0; float: left}
.mjx-test-inline .MathJax_right_box {display: inline-block; width: 0; float: right}
.mjx-test-display .MathJax_right_box {display: table-cell!important; width: 10000em!important; min-width: 0; max-width: none; padding: 0; border: 0; margin: 0}
.MathJax .MathJax_HitBox {cursor: text; background: white; opacity: 0; filter: alpha(opacity=0)}
.MathJax .MathJax_HitBox * {filter: none; opacity: 1; background: transparent}
#MathJax_Tooltip * {filter: none; opacity: 1; background: transparent}
@font-face {font-family: MathJax_Main; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/fonts/HTML-CSS/TeX/woff/MathJax_Main-Regular.woff?V=2.7.7') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/fonts/HTML-CSS/TeX/otf/MathJax_Main-Regular.otf?V=2.7.7') format('opentype')}
@font-face {font-family: MathJax_Main; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/fonts/HTML-CSS/TeX/woff/MathJax_Main-Bold.woff?V=2.7.7') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/fonts/HTML-CSS/TeX/otf/MathJax_Main-Bold.otf?V=2.7.7') format('opentype'); font-weight: bold}
@font-face {font-family: MathJax_Main; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/fonts/HTML-CSS/TeX/woff/MathJax_Main-Italic.woff?V=2.7.7') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/fonts/HTML-CSS/TeX/otf/MathJax_Main-Italic.otf?V=2.7.7') format('opentype'); font-style: italic}
@font-face {font-family: MathJax_Math; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/fonts/HTML-CSS/TeX/woff/MathJax_Math-Italic.woff?V=2.7.7') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/fonts/HTML-CSS/TeX/otf/MathJax_Math-Italic.otf?V=2.7.7') format('opentype'); font-style: italic}
@font-face {font-family: MathJax_Caligraphic; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Regular.woff?V=2.7.7') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf?V=2.7.7') format('opentype')}
@font-face {font-family: MathJax_Size1; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/fonts/HTML-CSS/TeX/woff/MathJax_Size1-Regular.woff?V=2.7.7') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/fonts/HTML-CSS/TeX/otf/MathJax_Size1-Regular.otf?V=2.7.7') format('opentype')}
@font-face {font-family: MathJax_Size2; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/fonts/HTML-CSS/TeX/woff/MathJax_Size2-Regular.woff?V=2.7.7') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/fonts/HTML-CSS/TeX/otf/MathJax_Size2-Regular.otf?V=2.7.7') format('opentype')}
@font-face {font-family: MathJax_Size3; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/fonts/HTML-CSS/TeX/woff/MathJax_Size3-Regular.woff?V=2.7.7') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/fonts/HTML-CSS/TeX/otf/MathJax_Size3-Regular.otf?V=2.7.7') format('opentype')}
@font-face {font-family: MathJax_Size4; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/fonts/HTML-CSS/TeX/woff/MathJax_Size4-Regular.woff?V=2.7.7') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/fonts/HTML-CSS/TeX/otf/MathJax_Size4-Regular.otf?V=2.7.7') format('opentype')}
.MathJax_Preview {color: #000}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck.RTL {right: .7em; left: auto}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style></head>
<body><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px none; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"></div></div><div id="MathJax_Message" style="display: none;"></div>
<div id="globalWrapper">
<span class="MathJax" id="MathJax-Element-1-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-1" style="width: 0em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(3.874em, 1000em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mrow" id="MathJax-Span-2"></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.052em; border-left: 0px solid; width: 0px; height: 0.104em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-1">
\newcommand{\lyxlock}{}
</script>
<noscript>
<div class="warning">
Warning: <a href="http://www.mathjax.org/">MathJax</a> requires JavaScript to correctly process the mathematics on this page. Please enable JavaScript on your browser.
</div><hr>
</noscript>
<h1 class="title">
Trabalho Prático 1
</h1>
<h1 class="title">
Visualizador de Imagens HDR
</h1>
<h2 class="author">
Programação C
</h2>
<h2 class="Date">
04/2021
</h2>
<h1 class="Seção">
<a class="toc" name="toc-Seção-1" target="new--noconvert">1</a> Introdução
</h1>
<div class="Unindented">
Alcance ou intervalo dinâmico (em inglês, <i>dynamic range</i>) em 
fotografia descreve a razão entre as intensidades mínimas e máximas 
mensuráveis de luz (preto e branco, respectivamente). Porém, no mundo 
real nunca encontramos preto ou branco verdadeiros, apenas graus 
diversos de intensidade das fontes de luz e reflectância dos objetos. 
</div>
<div class="Indented">
Uma imagem HDR (<i>high dynamic range</i>) é uma imagem capaz de 
representar um intervalo maior de luminosidade do que é possível com 
técnicas convencionais de imagens digitais ou fotografia. O objetivo é 
mostrar um alcance similar ao que experimentamos com a visão humana. 
Esta, através de adaptação da íris e outros mecanismos, se ajusta 
constantemente e automaticamente de acordo com a variação de iluminação 
presente nos ambientes. O cérebro humano interpreta continuamente essa 
informação, de forma que possamos enxergar em uma variedade enorme de 
condições de iluminação.
</div>
<div class="Indented">
Para demonstrar a adaptação automática do olho humano, observe a imagem abaixo (<a class="URL" href="http://persci.mit.edu/gallery/checkershadow" target="new--noconvert">Checker shadow illusion (Edward H. Adelson)</a>: nela, os blocos A e B têm exatamente a mesma cor, mas o fato de um deles estar na sombra cria uma ilusão para os nossos olhos.
</div>
<div class="Indented">
<div class="center">
<img class="embedded" src="Visualizador%20de%20Imagens%20HDR_arquivos/checker.jpg" alt="figure checker.jpg" style="max-width: 540px; max-height: 420px;">

</div>

</div>
<div class="Indented">
Por exemplo, uma imagem que pode se beneficiar dessa técnica é a que 
aparece abaixo: ela contém luz solar direta e muito intensa, mas também 
áreas de sombra. Ao capturarmos essa imagem com uma câmera digital, 
precisamos decidir se desejamos ajustar a exposição para a parte clara 
ou para a parte escura - nesta imagem, estamos expondo a parte clara.
</div>
<div class="Indented">
<div class="center">
<img class="embedded" src="Visualizador%20de%20Imagens%20HDR_arquivos/monte1.jpg" alt="figure monte1.jpg" style="max-width: 595px; max-height: 358px;">

</div>

</div>
<div class="Indented">
Se decidirmos ajustar a exposição para a parte escura, a parte clara desaparecerá (dizemos que ficará "superexposta"):
</div>
<div class="Indented">
<div class="center">
<img class="embedded" src="Visualizador%20de%20Imagens%20HDR_arquivos/monte2.jpg" alt="figure monte2.jpg" style="max-width: 595px; max-height: 358px;">

</div>

</div>
<div class="Indented">
Uma imagem HDR resolve esse problema, pois consegue capturar toda essa 
variação de intensidade luminosa. Mas como produzir imagens desse tipo? 
Uma técnica utilizada é combinar várias imagens obtidas com uma câmera 
(não HDR), mas com exposições diferentes (o que é denominado <i>bracketing</i> em fotografia). Por exemplo, a partir de 5 imagens do mesmo ambiente, geramos uma imagem HDR:
</div>
<div class="Indented">
<div class="center">
<img class="embedded" src="Visualizador%20de%20Imagens%20HDR_arquivos/cathedral.jpg" alt="figure cathedral.jpg" style="max-width: 780px; max-height: 233px;">

</div>

</div>
<div class="Indented">
Porém, a maior parte das telas atuais de computador e TVs não têm a 
capacidade de exibir toda a variação luminosa em uma imagem HDR - apenas
 recentemente começaram a aparecer as TVs Ultra HD (4K) com HDR, bem 
como alguns modelos de tablets e celulares. Portanto, também foi preciso
 desenvolver técnicas para exibir os resultados. Essas técnicas são 
chamadas, genericamente, de mapeamentos tonais (<i>tone mapping</i>). O objetivo é reduzir o contraste de uma imagem HDR, de forma a exibi-la em dispositivos com alcance dinâmico inferior.
</div>
<div class="Indented">
Neste trabalho, você implementará um programa para ler uma imagem em um formato HDR e exibi-la usando um algoritmo de <i>tone</i> <i>mapping</i>. Um exemplo pode ser visto abaixo:
</div>
<div class="Indented">
<div class="center">
<img class="embedded" src="Visualizador%20de%20Imagens%20HDR_arquivos/cathdr.jpg" alt="figure cathdr.jpg" style="max-width: 307px; max-height: 461px;">

</div>

</div>
<h1 class="Seção">
<a class="toc" name="toc-Seção-2" target="new--noconvert">2</a> Funcionamento
</h1>
<div class="Unindented">
Ao ser iniciado, o programa deve carregar um arquivo de imagem. Essas imagens estão em um formato especial (sufixo <i>.hdf</i>).
 É importante entendermos a diferença entre esse formato e uma imagem 
convencional. Imagens são geralmente representadas por uma matriz de 
pontos (<i>pixels</i>)<i> </i>onde cada cor é definida por 3 
componentes: vermelho (R), verde (G) e azul (B). Cada uma dessas 
componentes usualmente é codificada em <b>um byte</b>, o que produz <b>3 bytes por pixel</b>
 (24 bits) - ou seja, 16 milhões de possíveis cores. Em outras palavras,
 as intensidades (R, G, B) variam de 0 a 255, onde 0 é escuro e 255 é 
claro.
</div>
<div class="Indented">
Veja abaixo como diversas cores são representadas nesse formato - cada cor está expressa pelas componentes RGB em hexadecimal.
</div>
<div class="Indented">
<img class="embedded" src="Visualizador%20de%20Imagens%20HDR_arquivos/hex-colors.jpg" alt="figure hex-colors.jpg" style="max-width: 300px; max-height: 300px;">
<img class="embedded" src="Visualizador%20de%20Imagens%20HDR_arquivos/rgbcolors.jpg" alt="figure rgbcolors.jpg" style="max-width: 712px; max-height: 271px;">

</div>
<div class="Indented">
Já uma imagem HDR pode possuir <b>valores</b> <b>maiores</b> que esses limites, sendo geralmente representada em ponto flutuante (valores<i> float</i>, por exemplo). O formato <i>HDF</i> codifica as cores de forma diferente (ver seção <a class="Reference" href="#subsec:Leitura" target="new--noconvert">2.1↓</a>), mas na prática o resultado é uma representação <i>float</i>.
</div>
<div class="Indented">
Após a leitura da imagem, o usuário poderá definir o fator de exposição 
desejado, a fim de "clarear" ou "escurecer" a imagem, bem como também 
ajustar os níveis de preto e de branco.
</div>
<div class="Indented">
A ordem do processo é a seguinte:
</div>
<ol>
<li>
Leitura e decodificação da imagem (seção <a class="Reference" href="#subsec:Leitura" target="new--noconvert">2.1↓</a>).
</li>
<li>
Aplicar o fator de exposição desejado (seção <a class="Reference" href="#subsec:Expos" target="new--noconvert">2.2↓</a>).
</li>
<li>
Aplicar o algoritmo de <i>tone</i> <i>mapping</i> (seção <a class="Reference" href="#subsec:ToneMap" target="new--noconvert">2.3↓</a>).
</li>
<li>
Converter o resultado para 24 bits (seção <a class="Reference" href="#subsec:RGB8" target="new--noconvert">2.5↓</a>).
</li>
<li>
Criação do histograma da imagem 24 bits (seção <a class="Reference" href="#subsec:Criação-do-histograma" target="new--noconvert">2.6↓</a>).
</li>
<li>
Ajuste dos níveis de preto e branco (seção <a class="Reference" href="#subsec:Ajuste-dos-níveis" target="new--noconvert">2.7↓</a>).
</li>
<li>
Retornar ao passo 2, caso a exposição ou os níveis mínimo/máximo sejam alterados pelo teclado (o programa já faz isso).
</li>

</ol>
<div class="Unindented">
As próximas seções detalham como implementar cada parte do processo.
</div>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-2.1" target="new--noconvert">2.1</a> <a class="Label" name="subsec:Leitura" target="new--noconvert"> </a>Leitura e decodificação da imagem HDF
</h2>
<div class="Unindented">
A imagem no formato HDF consiste primeiramente em um <i>header</i>, onde as informações estão organizadas da seguinte forma:
</div>
<ul>
<li>
Os caracteres <b>HDF</b>, identificando a imagem nesse formato
</li>
<li>
A <b>largura</b> da imagem em pixels, armazenada como um inteiro sem sinal
</li>
<li>
A <b>altura</b> da imagem em pixels, armazenada como um inteiro sem sinal
</li>

</ul>
<div class="Unindented">
Você deverá usar a função <b>carregaHeader</b>, que armazena essas informações no vetor global <i>header</i>.
</div>
<div class="Indented">
Após a extração das dimensões da imagem do <i>header</i>, você deverá chamar a função <b>carregaImagem</b>, que armazena, respectivamente, nas variáveis <i>image</i> e <i>image8, </i>ponteiros para a imagem original e imagem de saída (vazia, a ser utilizada depois) O ponteiro <i>image</i> aponta para o início da matriz de pixels - mas lembre-se que essa matriz é retornada como um <b>vetor</b>. Cada pixel é codificado em 4 bytes:
</div>
<ul>
<li>
Componente R da cor <span class="MathJax_Preview"><span class="MathJax" id="MathJax-Element-2-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-3" style="width: 2.37em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.937em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.316em, 1001.84em, 2.574em, -1000em); top: -2.195em; left: 0em;"><span class="mrow" id="MathJax-Span-4"><span class="mo" id="MathJax-Span-5" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-6"><span style="display: inline-block; position: relative; width: 1.164em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.153em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-7" style="font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-8"><span class="mrow" id="MathJax-Span-9"><span class="mi" id="MathJax-Span-10" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">e</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-11" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.195em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.355em; border-left: 0px solid; width: 0px; height: 1.314em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-2">
(R_{e})
</script>
</span>
</li>
<li>
Componente G da cor<span class="MathJax_Preview"><span class="MathJax" id="MathJax-Element-3-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-12" style="width: 2.413em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.98em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.316em, 1001.89em, 2.574em, -1000em); top: -2.195em; left: 0em;"><span class="mrow" id="MathJax-Span-13"><span class="mo" id="MathJax-Span-14" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-15"><span style="display: inline-block; position: relative; width: 1.191em; height: 0px;"><span style="position: absolute; clip: rect(3.169em, 1000.76em, 4.154em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-16" style="font-family: MathJax_Math; font-style: italic;">G</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.786em;"><span class="texatom" id="MathJax-Span-17"><span class="mrow" id="MathJax-Span-18"><span class="mi" id="MathJax-Span-19" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">e</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-20" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.195em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.355em; border-left: 0px solid; width: 0px; height: 1.314em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-3">
(G_{e})
</script>
</span> 
</li>
<li>
Componente B da cor<span class="MathJax_Preview"><span class="MathJax" id="MathJax-Element-4-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-21" style="width: 2.37em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.937em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.316em, 1001.84em, 2.574em, -1000em); top: -2.195em; left: 0em;"><span class="mrow" id="MathJax-Span-22"><span class="mo" id="MathJax-Span-23" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-24"><span style="display: inline-block; position: relative; width: 1.164em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-25" style="font-family: MathJax_Math; font-style: italic;">B</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-26"><span class="mrow" id="MathJax-Span-27"><span class="mi" id="MathJax-Span-28" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">e</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-29" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.195em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.355em; border-left: 0px solid; width: 0px; height: 1.314em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-4">
(B_{e})
</script>
</span>
</li>
<li>
Mantissa <span class="MathJax_Preview"><span class="MathJax" id="MathJax-Element-5-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-30" style="width: 1.982em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.636em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.359em, 1001.54em, 2.617em, -1000em); top: -2.238em; left: 0em;"><span class="mrow" id="MathJax-Span-31"><span class="mo" id="MathJax-Span-32" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-33" style="font-family: MathJax_Math; font-style: italic;">m</span><span class="mo" id="MathJax-Span-34" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.238em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.355em; border-left: 0px solid; width: 0px; height: 1.314em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-5">
(m)
</script>
</span>
</li>

</ul>
<div class="Unindented">
Esse formato é capaz de representar dados em ponto flutuante de uma forma bastante econômica. Para obter os valores RGB<i> float</i> <span class="MathJax_Preview"><span class="MathJax" id="MathJax-Element-6-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-35" style="width: 6.545em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.381em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.402em, 1005.29em, 2.709em, -1000em); top: -2.281em; left: 0em;"><span class="mrow" id="MathJax-Span-36"><span class="mo" id="MathJax-Span-37" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-38"><span style="display: inline-block; position: relative; width: 1.223em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.153em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-39" style="font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.849em; left: 0.759em;"><span class="texatom" id="MathJax-Span-40"><span class="mrow" id="MathJax-Span-41"><span class="mi" id="MathJax-Span-42" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-43" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-44" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.25em; height: 0px;"><span style="position: absolute; clip: rect(3.169em, 1000.76em, 4.154em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-45" style="font-family: MathJax_Math; font-style: italic;">G</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.849em; left: 0.786em;"><span class="texatom" id="MathJax-Span-46"><span class="mrow" id="MathJax-Span-47"><span class="mi" id="MathJax-Span-48" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-49" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-50" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.223em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-51" style="font-family: MathJax_Math; font-style: italic;">B</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.849em; left: 0.759em;"><span class="texatom" id="MathJax-Span-52"><span class="mrow" id="MathJax-Span-53"><span class="mi" id="MathJax-Span-54" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-55" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.281em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.414em; border-left: 0px solid; width: 0px; height: 1.373em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-6">
(R_{f},G_{f},B_{f})
</script>
</span> a partir dos 4 bytes do pixel, basta realizar o seguinte cálculo:
</div>
<div class="Indented">
<span class="MathJax_Preview">
<div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-7-Frame" tabindex="0" style="text-align: center;"><nobr><span class="math" id="MathJax-Span-56" style="width: 18.597em; display: inline-block;"><span style="display: inline-block; position: relative; width: 15.367em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.445em, 1015.27em, 2.753em, -1000em); top: -2.324em; left: 0em;"><span class="mrow" id="MathJax-Span-57"><span class="mo" id="MathJax-Span-58" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-59"><span style="display: inline-block; position: relative; width: 1.223em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.153em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-60" style="font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.849em; left: 0.759em;"><span class="texatom" id="MathJax-Span-61"><span class="mrow" id="MathJax-Span-62"><span class="mi" id="MathJax-Span-63" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-64" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-65" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.25em; height: 0px;"><span style="position: absolute; clip: rect(3.169em, 1000.76em, 4.154em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-66" style="font-family: MathJax_Math; font-style: italic;">G</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.849em; left: 0.786em;"><span class="texatom" id="MathJax-Span-67"><span class="mrow" id="MathJax-Span-68"><span class="mi" id="MathJax-Span-69" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-70" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-71" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.223em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-72" style="font-family: MathJax_Math; font-style: italic;">B</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.849em; left: 0.759em;"><span class="texatom" id="MathJax-Span-73"><span class="mrow" id="MathJax-Span-74"><span class="mi" id="MathJax-Span-75" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-76" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-77" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mo" id="MathJax-Span-78" style="font-family: MathJax_Main; padding-left: 0.278em;">(</span><span class="msubsup" id="MathJax-Span-79"><span style="display: inline-block; position: relative; width: 1.164em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.153em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-80" style="font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-81"><span class="mrow" id="MathJax-Span-82"><span class="mi" id="MathJax-Span-83" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">e</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-84" style="font-family: MathJax_Main; padding-left: 0.222em;">⋅</span><span class="mi" id="MathJax-Span-85" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">c</span><span class="mo" id="MathJax-Span-86" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-87" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.191em; height: 0px;"><span style="position: absolute; clip: rect(3.169em, 1000.76em, 4.154em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-88" style="font-family: MathJax_Math; font-style: italic;">G</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.786em;"><span class="texatom" id="MathJax-Span-89"><span class="mrow" id="MathJax-Span-90"><span class="mi" id="MathJax-Span-91" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">e</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-92" style="font-family: MathJax_Main; padding-left: 0.222em;">⋅</span><span class="mi" id="MathJax-Span-93" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">c</span><span class="mo" id="MathJax-Span-94" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-95" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.164em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-96" style="font-family: MathJax_Math; font-style: italic;">B</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-97"><span class="mrow" id="MathJax-Span-98"><span class="mi" id="MathJax-Span-99" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">e</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-100" style="font-family: MathJax_Main; padding-left: 0.222em;">⋅</span><span class="mi" id="MathJax-Span-101" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">c</span><span class="mo" id="MathJax-Span-102" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.324em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.414em; border-left: 0px solid; width: 0px; height: 1.373em;"></span></span></nobr></span></div><script type="math/tex;mode=display" id="MathJax-Element-7">

(R_{f},G_{f},B_{f})=(R_{e}\cdot c,G_{e}\cdot c,B_{e}\cdot c)

</script>

</span>

</div>
<div class="Indented">
Onde <span class="MathJax_Preview"><span class="MathJax" id="MathJax-Element-8-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-103" style="width: 0.519em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.43em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.624em, 1000.43em, 2.335em, -1000em); top: -2.195em; left: 0em;"><span class="mrow" id="MathJax-Span-104"><span class="mi" id="MathJax-Span-105" style="font-family: MathJax_Math; font-style: italic;">c</span></span><span style="display: inline-block; width: 0px; height: 2.195em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.065em; border-left: 0px solid; width: 0px; height: 0.652em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-8">
c
</script>
</span> é o fator de conversão calculado a partir da mantissa: <span class="MathJax_Preview">
<div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-9-Frame" tabindex="0" style="text-align: center;"><nobr><span class="math" id="MathJax-Span-106" style="width: 6.2em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.122em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.252em, 1005.12em, 2.465em, -1000em); top: -2.324em; left: 0em;"><span class="mrow" id="MathJax-Span-107"><span class="mi" id="MathJax-Span-108" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mo" id="MathJax-Span-109" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="msubsup" id="MathJax-Span-110" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 3.357em; height: 0px;"><span style="position: absolute; clip: rect(3.208em, 1000.45em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mn" id="MathJax-Span-111" style="font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -4.416em; left: 0.5em;"><span class="texatom" id="MathJax-Span-112"><span class="mrow" id="MathJax-Span-113"><span class="mo" id="MathJax-Span-114" style="font-size: 70.7%; font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-115" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">m</span><span class="mo" id="MathJax-Span-116" style="font-size: 70.7%; font-family: MathJax_Main;">−</span><span class="mn" id="MathJax-Span-117" style="font-size: 70.7%; font-family: MathJax_Main;">136</span><span class="mo" id="MathJax-Span-118" style="font-size: 70.7%; font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.324em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.065em; border-left: 0px solid; width: 0px; height: 1.259em;"></span></span></nobr></span></div><script type="math/tex;mode=display" id="MathJax-Element-9">

c=2^{(m-136)}

</script>

</span>

</div>
<div class="Indented">
Por exemplo, supondo o trecho da imagem abaixo:
</div>
<div class="Indented">
<div class="center">
<img class="embedded" src="Visualizador%20de%20Imagens%20HDR_arquivos/headerimg.png" alt="figure headerimg.png" style="max-width: 1019px; max-height: 205px;">

</div>

</div>
<div class="Indented">
O <b>primeiro pixel</b> da imagem tem os valores hexa <b>(0x80, 0x40, 0x20, 0x81)</b> - ou em decimal <b>(128,64,32,129)</b>. O fator de conversão é então <span class="MathJax_Preview"><span class="MathJax" id="MathJax-Element-10-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-119" style="width: 16.962em; display: inline-block;"><span style="display: inline-block; position: relative; width: 13.989em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.272em, 1013.94em, 2.476em, -1000em); top: -2.324em; left: 0em;"><span class="mrow" id="MathJax-Span-120"><span class="mi" id="MathJax-Span-121" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mo" id="MathJax-Span-122" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="msubsup" id="MathJax-Span-123" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 3.797em; height: 0px;"><span style="position: absolute; clip: rect(3.208em, 1000.45em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mn" id="MathJax-Span-124" style="font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -4.396em; left: 0.5em;"><span class="texatom" id="MathJax-Span-125"><span class="mrow" id="MathJax-Span-126"><span class="mo" id="MathJax-Span-127" style="font-size: 70.7%; font-family: MathJax_Main;">(</span><span class="mn" id="MathJax-Span-128" style="font-size: 70.7%; font-family: MathJax_Main;">129</span><span class="mo" id="MathJax-Span-129" style="font-size: 70.7%; font-family: MathJax_Main;">−</span><span class="mn" id="MathJax-Span-130" style="font-size: 70.7%; font-family: MathJax_Main;">136</span><span class="mo" id="MathJax-Span-131" style="font-size: 70.7%; font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-132" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="msubsup" id="MathJax-Span-133" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.479em; height: 0px;"><span style="position: absolute; clip: rect(3.208em, 1000.45em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mn" id="MathJax-Span-134" style="font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -4.396em; left: 0.5em;"><span class="texatom" id="MathJax-Span-135"><span class="mrow" id="MathJax-Span-136"><span class="mo" id="MathJax-Span-137" style="font-size: 70.7%; font-family: MathJax_Main;">−</span><span class="mn" id="MathJax-Span-138" style="font-size: 70.7%; font-family: MathJax_Main;">7</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-139" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mn" id="MathJax-Span-140" style="font-family: MathJax_Main; padding-left: 0.278em;">0.0078125</span></span><span style="display: inline-block; width: 0px; height: 2.324em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.079em; border-left: 0px solid; width: 0px; height: 1.248em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-10">
c=2^{(129-136)}=2^{-7}=0.0078125
</script>
</span>.
</div>
<div class="Indented">
Portanto, os pixels convertidos para float resultam em: <b>(1.0, 0.5, 0.25)</b>
</div>
<div class="Indented">
Observe que por ser uma imagem HDR, não há limite superior definido. Ou seja, as componentes <span class="MathJax_Preview"><span class="MathJax" id="MathJax-Element-11-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-141" style="width: 1.466em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.205em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(0.178em, 1001.21em, 1.418em, -1000em); top: -0.99em; left: 0em;"><span class="mrow" id="MathJax-Span-142"><span class="msubsup" id="MathJax-Span-143"><span style="display: inline-block; position: relative; width: 1.223em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.153em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-144" style="font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.849em; left: 0.759em;"><span class="texatom" id="MathJax-Span-145"><span class="mrow" id="MathJax-Span-146"><span class="mi" id="MathJax-Span-147" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 0.99em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.414em; border-left: 0px solid; width: 0px; height: 1.292em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-11">
R_{f}
</script>
</span>, <span class="MathJax_Preview"><span class="MathJax" id="MathJax-Element-12-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-148" style="width: 1.509em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.248em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(0.156em, 1001.25em, 1.418em, -1000em); top: -0.99em; left: 0em;"><span class="mrow" id="MathJax-Span-149"><span class="msubsup" id="MathJax-Span-150"><span style="display: inline-block; position: relative; width: 1.25em; height: 0px;"><span style="position: absolute; clip: rect(3.169em, 1000.76em, 4.154em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-151" style="font-family: MathJax_Math; font-style: italic;">G</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.849em; left: 0.786em;"><span class="texatom" id="MathJax-Span-152"><span class="mrow" id="MathJax-Span-153"><span class="mi" id="MathJax-Span-154" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 0.99em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.414em; border-left: 0px solid; width: 0px; height: 1.319em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-12">
G_{f}
</script>
</span> e <span class="MathJax_Preview"><span class="MathJax" id="MathJax-Element-13-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-155" style="width: 1.466em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.205em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(0.178em, 1001.21em, 1.418em, -1000em); top: -0.99em; left: 0em;"><span class="mrow" id="MathJax-Span-156"><span class="msubsup" id="MathJax-Span-157"><span style="display: inline-block; position: relative; width: 1.223em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-158" style="font-family: MathJax_Math; font-style: italic;">B</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.849em; left: 0.759em;"><span class="texatom" id="MathJax-Span-159"><span class="mrow" id="MathJax-Span-160"><span class="mi" id="MathJax-Span-161" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 0.99em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.414em; border-left: 0px solid; width: 0px; height: 1.292em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-13">
B_{f}
</script>
</span> podem assumir qualquer valor.
</div>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-2.2" target="new--noconvert">2.2</a> <a class="Label" name="subsec:Expos" target="new--noconvert"> </a>Aplicação do fator de exposição
</h2>
<div class="Unindented">
O fator de exposição é meramente um valor <i>float</i> (<i>exposure</i>) que é multiplicado por cada componente de cor <span class="MathJax_Preview"><span class="MathJax" id="MathJax-Element-14-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-162" style="width: 6.545em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.381em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.402em, 1005.29em, 2.709em, -1000em); top: -2.281em; left: 0em;"><span class="mrow" id="MathJax-Span-163"><span class="mo" id="MathJax-Span-164" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-165"><span style="display: inline-block; position: relative; width: 1.223em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.153em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-166" style="font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.849em; left: 0.759em;"><span class="texatom" id="MathJax-Span-167"><span class="mrow" id="MathJax-Span-168"><span class="mi" id="MathJax-Span-169" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-170" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-171" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.25em; height: 0px;"><span style="position: absolute; clip: rect(3.169em, 1000.76em, 4.154em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-172" style="font-family: MathJax_Math; font-style: italic;">G</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.849em; left: 0.786em;"><span class="texatom" id="MathJax-Span-173"><span class="mrow" id="MathJax-Span-174"><span class="mi" id="MathJax-Span-175" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-176" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-177" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.223em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-178" style="font-family: MathJax_Math; font-style: italic;">B</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.849em; left: 0.759em;"><span class="texatom" id="MathJax-Span-179"><span class="mrow" id="MathJax-Span-180"><span class="mi" id="MathJax-Span-181" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-182" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.281em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.414em; border-left: 0px solid; width: 0px; height: 1.373em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-14">
(R_{f},G_{f},B_{f})
</script>
</span>, antes de realizar o <i>tone</i> <i>mapping. </i>Na verdade, utilizamos uma potência de 2, para simular mais precisamente o comportamento de uma câmera:
</div>
<div class="Indented">
<span class="MathJax_Preview">
<div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-15-Frame" tabindex="0" style="text-align: center;"><nobr><span class="math" id="MathJax-Span-183" style="width: 19.63em; display: inline-block;"><span style="display: inline-block; position: relative; width: 16.228em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.402em, 1016.13em, 2.709em, -1000em); top: -2.281em; left: 0em;"><span class="mrow" id="MathJax-Span-184"><span class="mo" id="MathJax-Span-185" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-186"><span style="display: inline-block; position: relative; width: 1.238em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.153em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-187" style="font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-188"><span class="mrow" id="MathJax-Span-189"><span class="mi" id="MathJax-Span-190" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">x</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-191" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-192" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.265em; height: 0px;"><span style="position: absolute; clip: rect(3.169em, 1000.76em, 4.154em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-193" style="font-family: MathJax_Math; font-style: italic;">G</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.786em;"><span class="texatom" id="MathJax-Span-194"><span class="mrow" id="MathJax-Span-195"><span class="mi" id="MathJax-Span-196" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">x</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-197" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-198" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.238em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-199" style="font-family: MathJax_Math; font-style: italic;">B</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-200"><span class="mrow" id="MathJax-Span-201"><span class="mi" id="MathJax-Span-202" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">x</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-203" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-204" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="msubsup" id="MathJax-Span-205" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 3.392em; height: 0px;"><span style="position: absolute; clip: rect(3.208em, 1000.45em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mn" id="MathJax-Span-206" style="font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -4.416em; left: 0.5em;"><span class="texatom" id="MathJax-Span-207"><span class="mrow" id="MathJax-Span-208"><span class="mi" id="MathJax-Span-209" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-210" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-211" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-212" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-213" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-214" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-215" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-216" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">e</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-217" style="font-family: MathJax_Main; padding-left: 0.222em;">⋅</span><span class="mo" id="MathJax-Span-218" style="font-family: MathJax_Main; padding-left: 0.222em;">(</span><span class="msubsup" id="MathJax-Span-219"><span style="display: inline-block; position: relative; width: 1.223em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.153em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-220" style="font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.849em; left: 0.759em;"><span class="texatom" id="MathJax-Span-221"><span class="mrow" id="MathJax-Span-222"><span class="mi" id="MathJax-Span-223" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-224" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-225" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.25em; height: 0px;"><span style="position: absolute; clip: rect(3.169em, 1000.76em, 4.154em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-226" style="font-family: MathJax_Math; font-style: italic;">G</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.849em; left: 0.786em;"><span class="texatom" id="MathJax-Span-227"><span class="mrow" id="MathJax-Span-228"><span class="mi" id="MathJax-Span-229" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-230" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-231" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.223em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-232" style="font-family: MathJax_Math; font-style: italic;">B</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.849em; left: 0.759em;"><span class="texatom" id="MathJax-Span-233"><span class="mrow" id="MathJax-Span-234"><span class="mi" id="MathJax-Span-235" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-236" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.281em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.414em; border-left: 0px solid; width: 0px; height: 1.373em;"></span></span></nobr></span></div><script type="math/tex;mode=display" id="MathJax-Element-15">

(R_{x},G_{x},B_{x})=2^{exposure}\cdot(R_{f},G_{f},B_{f})

</script>

</span>

</div>
<div class="Indented">
Esse fator deve ser inicializado com 0, o que corresponde a nenhuma alteração.
</div>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-2.3" target="new--noconvert">2.3</a> <a class="Label" name="subsec:ToneMap" target="new--noconvert"> </a>Algoritmo de <i>tone mapping</i>
</h2>
<div class="Unindented">
Como já mencionado, mapeamento tonal ou <i>tone</i> <i>mapping</i> tem o
 objetivo de reduzir o alcance dinâmico de uma imagem, de forma que ela 
possa ser exibida em um dispositivo não HDR. Há duas categorias 
principais de algoritmos desse tipo: <i>tone</i> <i>mapping</i> global e <i>tone</i> <i>mapping</i>
 local. O primeiro tipo, onde está o algoritmo que será implementado, 
visa alterar todos os pixels da imagem seguindo um mesmo critério (ou 
algoritmo). Já o segundo tipo leva em consideração outras 
características da imagem, como bordas de objetos, etc. Esse tipo de 
algoritmo é muito mais sofisticado e geralmente produz resultados 
melhores.
</div>
<div class="Indented">
Neste trabalho, implementaremos um algoritmo de <i>tone</i> <i>mapping</i> global, denominado <i>ACES</i> <i>(Academy Color Encoding System). </i>Esse algoritmo visa simular o tipo de resposta que o olho humano produz ao visualizar uma imagem.
</div>
<div class="Indented">
Para tanto, aplica-se a seguinte fórmula aos componentes R, G e B:
</div>
<ul>
<li>
Primeiro, reduz-se o valor da componente para 60% do original: <span class="MathJax_Preview"><span class="MathJax" id="MathJax-Element-16-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-237" style="width: 7.234em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.983em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.469em, 1005.94em, 2.604em, -1000em); top: -2.281em; left: 0em;"><span class="mrow" id="MathJax-Span-238"><span class="msubsup" id="MathJax-Span-239"><span style="display: inline-block; position: relative; width: 1.238em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.153em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-240" style="font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-241"><span class="mrow" id="MathJax-Span-242"><span class="mi" id="MathJax-Span-243" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">x</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-244" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="msubsup" id="MathJax-Span-245" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.238em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.153em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-246" style="font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-247"><span class="mrow" id="MathJax-Span-248"><span class="mi" id="MathJax-Span-249" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">x</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-250" style="font-family: MathJax_Main; padding-left: 0.222em;">⋅</span><span class="mn" id="MathJax-Span-251" style="font-family: MathJax_Main; padding-left: 0.222em;">0</span><span class="mo" id="MathJax-Span-252" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-253" style="font-family: MathJax_Main; padding-left: 0.167em;">6</span></span><span style="display: inline-block; width: 0px; height: 2.281em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.287em; border-left: 0px solid; width: 0px; height: 1.165em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-16">
R_{x}=R_{x}\cdot0,6
</script>
</span>
</li>
<li>
A seguir, calcula-se o mapeamento:<span class="MathJax_Preview">
<div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-17-Frame" tabindex="0" style="text-align: center;"><nobr><span class="math" id="MathJax-Span-254" style="width: 19.071em; display: inline-block;"><span style="display: inline-block; position: relative; width: 15.754em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(0.705em, 1015.75em, 3.358em, -1000em); top: -2.281em; left: 0em;"><span class="mrow" id="MathJax-Span-255"><span class="msubsup" id="MathJax-Span-256"><span style="display: inline-block; position: relative; width: 1.089em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.153em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-257" style="font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-258"><span class="mrow" id="MathJax-Span-259"><span class="mi" id="MathJax-Span-260" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">t</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-261" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mfrac" id="MathJax-Span-262" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 13.098em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(3.124em, 1009.72em, 4.382em, -1000em); top: -4.701em; left: 50%; margin-left: -4.905em;"><span class="mrow" id="MathJax-Span-263"><span class="msubsup" id="MathJax-Span-264"><span style="display: inline-block; position: relative; width: 1.238em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.153em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-265" style="font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-266"><span class="mrow" id="MathJax-Span-267"><span class="mi" id="MathJax-Span-268" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">x</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-269" style="font-family: MathJax_Main; padding-left: 0.222em;">⋅</span><span class="mo" id="MathJax-Span-270" style="font-family: MathJax_Main; padding-left: 0.222em;">(</span><span class="mn" id="MathJax-Span-271" style="font-family: MathJax_Main;">2</span><span class="mo" id="MathJax-Span-272" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-273" style="font-family: MathJax_Main; padding-left: 0.167em;">51</span><span class="mo" id="MathJax-Span-274" style="font-family: MathJax_Main; padding-left: 0.222em;">⋅</span><span class="msubsup" id="MathJax-Span-275" style="padding-left: 0.222em;"><span style="display: inline-block; position: relative; width: 1.238em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.153em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-276" style="font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-277"><span class="mrow" id="MathJax-Span-278"><span class="mi" id="MathJax-Span-279" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">x</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-280" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mn" id="MathJax-Span-281" style="font-family: MathJax_Main; padding-left: 0.222em;">0</span><span class="mo" id="MathJax-Span-282" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-283" style="font-family: MathJax_Main; padding-left: 0.167em;">03</span><span class="mo" id="MathJax-Span-284" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(3.124em, 1012.95em, 4.382em, -1000em); top: -3.305em; left: 50%; margin-left: -6.489em;"><span class="mrow" id="MathJax-Span-285"><span class="msubsup" id="MathJax-Span-286"><span style="display: inline-block; position: relative; width: 1.238em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.153em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-287" style="font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-288"><span class="mrow" id="MathJax-Span-289"><span class="mi" id="MathJax-Span-290" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">x</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-291" style="font-family: MathJax_Main; padding-left: 0.222em;">⋅</span><span class="mo" id="MathJax-Span-292" style="font-family: MathJax_Main; padding-left: 0.222em;">(</span><span class="mn" id="MathJax-Span-293" style="font-family: MathJax_Main;">2</span><span class="mo" id="MathJax-Span-294" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-295" style="font-family: MathJax_Main; padding-left: 0.167em;">43</span><span class="mo" id="MathJax-Span-296" style="font-family: MathJax_Main; padding-left: 0.222em;">⋅</span><span class="msubsup" id="MathJax-Span-297" style="padding-left: 0.222em;"><span style="display: inline-block; position: relative; width: 1.238em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.153em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-298" style="font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-299"><span class="mrow" id="MathJax-Span-300"><span class="mi" id="MathJax-Span-301" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">x</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-302" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mn" id="MathJax-Span-303" style="font-family: MathJax_Main; padding-left: 0.222em;">0</span><span class="mo" id="MathJax-Span-304" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-305" style="font-family: MathJax_Main; padding-left: 0.167em;">59</span><span class="mo" id="MathJax-Span-306" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-307" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mn" id="MathJax-Span-308" style="font-family: MathJax_Main; padding-left: 0.222em;">0</span><span class="mo" id="MathJax-Span-309" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-310" style="font-family: MathJax_Main; padding-left: 0.167em;">14</span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(0.887em, 1013.1em, 1.205em, -1000em); top: -1.296em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.4px solid; width: 13.098em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.076em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.281em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.199em; border-left: 0px solid; width: 0px; height: 3.002em;"></span></span></nobr></span></div><script type="math/tex;mode=display" id="MathJax-Element-17">

R_{t}=\frac{R_{x}\cdot(2,51\cdot R_{x}+0,03)}{R_{x}\cdot(2,43\cdot R_{x}+0,59)+0,14}

</script>

</span>

</li>
<li>
Garanta que o valor resultante esteja no intervalo <b>0...1 </b>(isto é, se for maior que 1, use 1, e vice-versa).
</li>

</ul>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-2.4" target="new--noconvert">2.4</a> Correção gama
</h2>
<div class="Unindented">
A correção gama se baseia na ideia que os dispositivos de exibição 
(telas de computador, por exemplo) não apresentam uma resposta linear a 
um sinal de entrada (cor). Dessa forma, podemos aplicar uma correção não
 linear nesse sinal utilizando a fórmula abaixo:
</div>
<div class="Indented">
<span class="MathJax_Preview">
<div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-18-Frame" tabindex="0" style="text-align: center;"><nobr><span class="math" id="MathJax-Span-311" style="width: 15.154em; display: inline-block;"><span style="display: inline-block; position: relative; width: 12.526em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(0.805em, 1012.43em, 2.696em, -1000em); top: -2.281em; left: 0em;"><span class="mrow" id="MathJax-Span-312"><span class="mo" id="MathJax-Span-313" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-314"><span style="display: inline-block; position: relative; width: 1.14em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.153em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-315" style="font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-316"><span class="mrow" id="MathJax-Span-317"><span class="mi" id="MathJax-Span-318" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">c</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-319" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-320" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.167em; height: 0px;"><span style="position: absolute; clip: rect(3.169em, 1000.76em, 4.154em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-321" style="font-family: MathJax_Math; font-style: italic;">G</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.786em;"><span class="texatom" id="MathJax-Span-322"><span class="mrow" id="MathJax-Span-323"><span class="mi" id="MathJax-Span-324" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">c</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-325" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-326" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.14em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-327" style="font-family: MathJax_Math; font-style: italic;">B</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-328"><span class="mrow" id="MathJax-Span-329"><span class="mi" id="MathJax-Span-330" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">c</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-331" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-332" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mo" id="MathJax-Span-333" style="font-family: MathJax_Main; padding-left: 0.278em;">(</span><span class="msubsup" id="MathJax-Span-334"><span style="display: inline-block; position: relative; width: 1.466em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.153em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-335" style="font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(3.223em, 1000.71em, 4.484em, -1000em); top: -4.699em; left: 0.759em;"><span class="texatom" id="MathJax-Span-336"><span class="mrow" id="MathJax-Span-337"><span class="mfrac" id="MathJax-Span-338"><span style="display: inline-block; position: relative; width: 0.392em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(3.541em, 1000.21em, 4.132em, -1000em); top: -4.321em; left: 50%; margin-left: -0.125em;"><span class="mn" id="MathJax-Span-339" style="font-size: 50%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(3.653em, 1000.27em, 4.24em, -1000em); top: -3.759em; left: 50%; margin-left: -0.136em;"><span class="mi" id="MathJax-Span-340" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">γ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.013em;"></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(0.887em, 1000.39em, 1.205em, -1000em); top: -1.223em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.4px solid; width: 0.392em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.076em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(3.431em, 1000.33em, 4.14em, -1000em); top: -3.725em; left: 0.759em;"><span class="texatom" id="MathJax-Span-341"><span class="mrow" id="MathJax-Span-342"><span class="mi" id="MathJax-Span-343" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">t</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-344" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-345" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.493em; height: 0px;"><span style="position: absolute; clip: rect(3.169em, 1000.76em, 4.154em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-346" style="font-family: MathJax_Math; font-style: italic;">G</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(3.223em, 1000.71em, 4.484em, -1000em); top: -4.699em; left: 0.786em;"><span class="texatom" id="MathJax-Span-347"><span class="mrow" id="MathJax-Span-348"><span class="mfrac" id="MathJax-Span-349"><span style="display: inline-block; position: relative; width: 0.392em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(3.541em, 1000.21em, 4.132em, -1000em); top: -4.321em; left: 50%; margin-left: -0.125em;"><span class="mn" id="MathJax-Span-350" style="font-size: 50%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(3.653em, 1000.27em, 4.24em, -1000em); top: -3.759em; left: 50%; margin-left: -0.136em;"><span class="mi" id="MathJax-Span-351" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">γ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.013em;"></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(0.887em, 1000.39em, 1.205em, -1000em); top: -1.223em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.4px solid; width: 0.392em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.076em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(3.431em, 1000.33em, 4.14em, -1000em); top: -3.725em; left: 0.786em;"><span class="texatom" id="MathJax-Span-352"><span class="mrow" id="MathJax-Span-353"><span class="mi" id="MathJax-Span-354" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">t</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-355" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-356" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.466em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-357" style="font-family: MathJax_Math; font-style: italic;">B</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(3.223em, 1000.71em, 4.484em, -1000em); top: -4.699em; left: 0.759em;"><span class="texatom" id="MathJax-Span-358"><span class="mrow" id="MathJax-Span-359"><span class="mfrac" id="MathJax-Span-360"><span style="display: inline-block; position: relative; width: 0.392em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(3.541em, 1000.21em, 4.132em, -1000em); top: -4.321em; left: 50%; margin-left: -0.125em;"><span class="mn" id="MathJax-Span-361" style="font-size: 50%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(3.653em, 1000.27em, 4.24em, -1000em); top: -3.759em; left: 50%; margin-left: -0.136em;"><span class="mi" id="MathJax-Span-362" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">γ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.013em;"></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(0.887em, 1000.39em, 1.205em, -1000em); top: -1.223em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.4px solid; width: 0.392em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.076em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(3.431em, 1000.33em, 4.14em, -1000em); top: -3.725em; left: 0.759em;"><span class="texatom" id="MathJax-Span-363"><span class="mrow" id="MathJax-Span-364"><span class="mi" id="MathJax-Span-365" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">t</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-366" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.281em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.398em; border-left: 0px solid; width: 0px; height: 2.08em;"></span></span></nobr></span></div><script type="math/tex;mode=display" id="MathJax-Element-18">

(R_{c},G_{c},B_{c})=(R_{t}^{\frac{1}{\gamma}},G_{t}^{\frac{1}{\gamma}},B_{t}^{\frac{1}{\gamma}})

</script>

</span>

</div>
<div class="Indented">
Onde <span class="MathJax_Preview"><span class="MathJax" id="MathJax-Element-19-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-367" style="width: 0.691em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.56em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.625em, 1000.56em, 2.54em, -1000em); top: -2.195em; left: 0em;"><span class="mrow" id="MathJax-Span-368"><span class="mi" id="MathJax-Span-369" style="font-family: MathJax_Math; font-style: italic;">γ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.025em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.195em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.313em; border-left: 0px solid; width: 0px; height: 0.899em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-19">
\gamma
</script>
</span> é a correção gama desejada. Para monitores convencionais, esse valor geralmente está entre 1.8 e 2.6 (experimente usar 2.2).
</div>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-2.5" target="new--noconvert">2.5</a> <a class="Label" name="subsec:RGB8" target="new--noconvert"> </a>Conversão para 24 bits
</h2>
<div class="Unindented">
Após a aplicação do fator de exposição, do algoritmo de <i>tone</i> <i>mapping</i> e da correção gama, o resultado ainda será uma imagem representada por <i>floats</i>, mas agora dentro do invervalo 0...1. Portanto, para converter cada pixel de entrada já corrigido pelo passo anterior (<span class="MathJax_Preview"><span class="MathJax" id="MathJax-Element-20-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-370" style="width: 5.727em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.735em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.402em, 1004.64em, 2.66em, -1000em); top: -2.281em; left: 0em;"><span class="mrow" id="MathJax-Span-371"><span class="msubsup" id="MathJax-Span-372"><span style="display: inline-block; position: relative; width: 1.14em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.153em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-373" style="font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-374"><span class="mrow" id="MathJax-Span-375"><span class="mi" id="MathJax-Span-376" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">c</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-377" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-378" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.167em; height: 0px;"><span style="position: absolute; clip: rect(3.169em, 1000.76em, 4.154em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-379" style="font-family: MathJax_Math; font-style: italic;">G</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.786em;"><span class="texatom" id="MathJax-Span-380"><span class="mrow" id="MathJax-Span-381"><span class="mi" id="MathJax-Span-382" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">c</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-383" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-384" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.14em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-385" style="font-family: MathJax_Math; font-style: italic;">B</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-386"><span class="mrow" id="MathJax-Span-387"><span class="mi" id="MathJax-Span-388" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">c</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-389" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.281em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.355em; border-left: 0px solid; width: 0px; height: 1.314em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-20">
R_{c},G_{c},B_{c})
</script>
</span> para RGB 24 bits <span class="MathJax_Preview"><span class="MathJax" id="MathJax-Element-21-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-390" style="width: 6.373em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.251em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.402em, 1005.16em, 2.66em, -1000em); top: -2.281em; left: 0em;"><span class="mrow" id="MathJax-Span-391"><span class="mo" id="MathJax-Span-392" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-393"><span style="display: inline-block; position: relative; width: 1.188em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.153em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-394" style="font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-395"><span class="mrow" id="MathJax-Span-396"><span class="mn" id="MathJax-Span-397" style="font-size: 70.7%; font-family: MathJax_Main;">8</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-398" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-399" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.215em; height: 0px;"><span style="position: absolute; clip: rect(3.169em, 1000.76em, 4.154em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-400" style="font-family: MathJax_Math; font-style: italic;">G</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.786em;"><span class="texatom" id="MathJax-Span-401"><span class="mrow" id="MathJax-Span-402"><span class="mn" id="MathJax-Span-403" style="font-size: 70.7%; font-family: MathJax_Main;">8</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-404" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-405" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.188em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-406" style="font-family: MathJax_Math; font-style: italic;">B</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-407"><span class="mrow" id="MathJax-Span-408"><span class="mn" id="MathJax-Span-409" style="font-size: 70.7%; font-family: MathJax_Main;">8</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-410" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.281em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.355em; border-left: 0px solid; width: 0px; height: 1.314em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-21">
(R_{8},G_{8},B_{8})
</script>
</span>, basta fazer:
</div>
<div class="Indented">
<span class="MathJax_Preview">
<div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-22-Frame" tabindex="0" style="text-align: center;"><nobr><span class="math" id="MathJax-Span-411" style="width: 7.621em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.284em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(-1.189em, 1006.23em, 2.669em, -1000em); top: -0.99em; left: 0em;"><span class="mrow" id="MathJax-Span-412"><span class="mtable" id="MathJax-Span-413"><span style="display: inline-block; position: relative; width: 5.938em; height: 0px; margin-right: 0.167em; margin-left: 0.167em;"><span style="position: absolute; clip: rect(2.371em, 1001.22em, 6.078em, -1000em); top: -4.434em; left: 0em;"><span style="display: inline-block; position: relative; width: 1.215em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1001.19em, 4.298em, -1000em); top: -5.253em; right: 0em;"><span class="mtd" id="MathJax-Span-414"><span class="mrow" id="MathJax-Span-415"><span class="msubsup" id="MathJax-Span-416"><span style="display: inline-block; position: relative; width: 1.188em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.153em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-417" style="font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-418"><span class="mrow" id="MathJax-Span-419"><span class="mn" id="MathJax-Span-420" style="font-size: 70.7%; font-family: MathJax_Main;">8</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(3.169em, 1001.22em, 4.298em, -1000em); top: -3.953em; right: 0em;"><span class="mtd" id="MathJax-Span-434"><span class="mrow" id="MathJax-Span-435"><span class="msubsup" id="MathJax-Span-436"><span style="display: inline-block; position: relative; width: 1.215em; height: 0px;"><span style="position: absolute; clip: rect(3.169em, 1000.76em, 4.154em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-437" style="font-family: MathJax_Math; font-style: italic;">G</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.786em;"><span class="texatom" id="MathJax-Span-438"><span class="mrow" id="MathJax-Span-439"><span class="mn" id="MathJax-Span-440" style="font-size: 70.7%; font-family: MathJax_Main;">8</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(3.191em, 1001.19em, 4.298em, -1000em); top: -2.653em; right: 0em;"><span class="mtd" id="MathJax-Span-454"><span class="mrow" id="MathJax-Span-455"><span class="msubsup" id="MathJax-Span-456"><span style="display: inline-block; position: relative; width: 1.188em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-457" style="font-family: MathJax_Math; font-style: italic;">B</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-458"><span class="mrow" id="MathJax-Span-459"><span class="mn" id="MathJax-Span-460" style="font-size: 70.7%; font-family: MathJax_Main;">8</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.434em;"></span></span><span style="position: absolute; clip: rect(2.257em, 1001em, 5.482em, -1000em); top: -4.003em; left: 1.215em;"><span style="display: inline-block; position: relative; width: 1.056em; height: 0px;"><span style="position: absolute; clip: rect(3.507em, 1001em, 4.132em, -1000em); top: -5.253em; left: 50%; margin-left: -0.528em;"><span class="mtd" id="MathJax-Span-421"><span class="mrow" id="MathJax-Span-422"><span class="mi" id="MathJax-Span-423"></span><span class="mo" id="MathJax-Span-424" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(3.507em, 1001em, 4.132em, -1000em); top: -3.953em; left: 50%; margin-left: -0.528em;"><span class="mtd" id="MathJax-Span-441"><span class="mrow" id="MathJax-Span-442"><span class="mi" id="MathJax-Span-443"></span><span class="mo" id="MathJax-Span-444" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(3.507em, 1001em, 4.132em, -1000em); top: -2.653em; left: 50%; margin-left: -0.528em;"><span class="mtd" id="MathJax-Span-461"><span class="mrow" id="MathJax-Span-462"><span class="mi" id="MathJax-Span-463"></span><span class="mo" id="MathJax-Span-464" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(2.371em, 1003.34em, 6.07em, -1000em); top: -4.434em; left: 2.548em;"><span style="display: inline-block; position: relative; width: 3.389em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1003.31em, 4.29em, -1000em); top: -5.253em; left: 0em;"><span class="mtd" id="MathJax-Span-425"><span class="mrow" id="MathJax-Span-426"><span class="msubsup" id="MathJax-Span-427"><span style="display: inline-block; position: relative; width: 1.14em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.153em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-428" style="font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-429"><span class="mrow" id="MathJax-Span-430"><span class="mi" id="MathJax-Span-431" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">c</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-432" style="font-family: MathJax_Main; padding-left: 0.222em;">⋅</span><span class="mn" id="MathJax-Span-433" style="font-family: MathJax_Main; padding-left: 0.222em;">255</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(3.169em, 1003.34em, 4.29em, -1000em); top: -3.953em; left: 0em;"><span class="mtd" id="MathJax-Span-445"><span class="mrow" id="MathJax-Span-446"><span class="msubsup" id="MathJax-Span-447"><span style="display: inline-block; position: relative; width: 1.167em; height: 0px;"><span style="position: absolute; clip: rect(3.169em, 1000.76em, 4.154em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-448" style="font-family: MathJax_Math; font-style: italic;">G</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.786em;"><span class="texatom" id="MathJax-Span-449"><span class="mrow" id="MathJax-Span-450"><span class="mi" id="MathJax-Span-451" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">c</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-452" style="font-family: MathJax_Main; padding-left: 0.222em;">⋅</span><span class="mn" id="MathJax-Span-453" style="font-family: MathJax_Main; padding-left: 0.222em;">255</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(3.191em, 1003.31em, 4.29em, -1000em); top: -2.653em; left: 0em;"><span class="mtd" id="MathJax-Span-465"><span class="mrow" id="MathJax-Span-466"><span class="msubsup" id="MathJax-Span-467"><span style="display: inline-block; position: relative; width: 1.14em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-468" style="font-family: MathJax_Math; font-style: italic;">B</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-469"><span class="mrow" id="MathJax-Span-470"><span class="mi" id="MathJax-Span-471" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">c</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-472" style="font-family: MathJax_Main; padding-left: 0.222em;">⋅</span><span class="mn" id="MathJax-Span-473" style="font-family: MathJax_Main; padding-left: 0.222em;">255</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.434em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 0.99em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.928em; border-left: 0px solid; width: 0px; height: 4.46em;"></span></span></nobr></span></div><script type="math/tex;mode=display" id="MathJax-Element-22">
\begin{eqnarray*}
R_{8} & = & R_{c}\cdot255\\
G_{8} & = & G_{c}\cdot255\\
B_{8} & = & B_{c}\cdot255
\end{eqnarray*}
</script>

</span>

</div>
<div class="Indented">
Ou seja, multiplica-se o valor por 255, convertendo o resultado para inteiro no final.
</div>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-2.6" target="new--noconvert">2.6</a> <a class="Label" name="subsec:Criação-do-histograma" target="new--noconvert"> </a>Criação do histograma da imagem 24 bits
</h2>
<div class="Unindented">
Um histograma de uma imagem apresenta a distribuição dos pixels de 
acordo com a luminosidade. Eles são muito úteis para visualizarmos se a 
imagem está subexposta (muitas regiões escuras) ou superexposta (muitas 
regiões claras). As imagens abaixo foram retiradas do site <a class="URL" href="https://www.cambridgeincolour.com/tutorials/histograms1.htm" target="new--noconvert">Cambridge in Colour - Histograms</a>.
</div>
<div class="Indented">
<div class="center">
<img class="embedded" src="Visualizador%20de%20Imagens%20HDR_arquivos/hist_examplehist.png" alt="figure hist_examplehist.png" style="max-width: 290px; max-height: 160px;">

</div>

</div>
<div class="Indented">
Em termos práticos, o histograma é essencialmente um <i>array</i>, onde cada posição representa uma faixa de intensidades (<i>bins</i>,
 em inglês). Para simplificar, utilizaremos um histograma com exatamente
 256 faixas, já que temos 256 variações por componente de cor.
</div>
<div class="Indented">
O programa já define uma variável chamada <b><i>histogram</i></b>, que deve ser usada para isso. A razão é que o componente de visualização utiliza essa variável para exibir o histograma.
</div>
<div class="Indented">
Você deverá então:
</div>
<ol>
<li>
Inicializar o histograma com zeros.
</li>
<li>
Passar por toda a imagem, incrementando o valor armazenado na posição 
correspondente ao pixel no array. Observe que você deverá utilizar a 
intensidade (luminância) do pixel, que pode ser calculada por:<span class="MathJax_Preview">
<div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-23-Frame" tabindex="0" style="text-align: center;"><nobr><span class="math" id="MathJax-Span-474" style="width: 21.051em; display: inline-block;"><span style="display: inline-block; position: relative; width: 17.39em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.49em, 1017.39em, 2.648em, -1000em); top: -2.324em; left: 0em;"><span class="mrow" id="MathJax-Span-475"><span class="mi" id="MathJax-Span-476" style="font-family: MathJax_Math; font-style: italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span class="mo" id="MathJax-Span-477" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mn" id="MathJax-Span-478" style="font-family: MathJax_Main; padding-left: 0.278em;">0</span><span class="mo" id="MathJax-Span-479" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-480" style="font-family: MathJax_Main; padding-left: 0.167em;">299</span><span class="mo" id="MathJax-Span-481" style="font-family: MathJax_Main; padding-left: 0.222em;">⋅</span><span class="msubsup" id="MathJax-Span-482" style="padding-left: 0.222em;"><span style="display: inline-block; position: relative; width: 1.188em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.153em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-483" style="font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-484"><span class="mrow" id="MathJax-Span-485"><span class="mn" id="MathJax-Span-486" style="font-size: 70.7%; font-family: MathJax_Main;">8</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-487" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mn" id="MathJax-Span-488" style="font-family: MathJax_Main; padding-left: 0.222em;">0</span><span class="mo" id="MathJax-Span-489" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-490" style="font-family: MathJax_Main; padding-left: 0.167em;">587</span><span class="mo" id="MathJax-Span-491" style="font-family: MathJax_Main; padding-left: 0.222em;">⋅</span><span class="msubsup" id="MathJax-Span-492" style="padding-left: 0.222em;"><span style="display: inline-block; position: relative; width: 1.215em; height: 0px;"><span style="position: absolute; clip: rect(3.169em, 1000.76em, 4.154em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-493" style="font-family: MathJax_Math; font-style: italic;">G</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.786em;"><span class="texatom" id="MathJax-Span-494"><span class="mrow" id="MathJax-Span-495"><span class="mn" id="MathJax-Span-496" style="font-size: 70.7%; font-family: MathJax_Main;">8</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-497" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mn" id="MathJax-Span-498" style="font-family: MathJax_Main; padding-left: 0.222em;">0</span><span class="mo" id="MathJax-Span-499" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-500" style="font-family: MathJax_Main; padding-left: 0.167em;">114</span><span class="mo" id="MathJax-Span-501" style="font-family: MathJax_Main; padding-left: 0.222em;">⋅</span><span class="msubsup" id="MathJax-Span-502" style="padding-left: 0.222em;"><span style="display: inline-block; position: relative; width: 1.188em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-503" style="font-family: MathJax_Math; font-style: italic;">B</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-504"><span class="mrow" id="MathJax-Span-505"><span class="mn" id="MathJax-Span-506" style="font-size: 70.7%; font-family: MathJax_Main;">8</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.324em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.287em; border-left: 0px solid; width: 0px; height: 1.192em;"></span></span></nobr></span></div><script type="math/tex;mode=display" id="MathJax-Element-23">

I=0,299\cdot R_{8}+0,587\cdot G_{8}+0,114\cdot B_{8}

</script>

</span>

</li>
<li>
Ao final desse processo, é preciso <b>normalizar</b> o histograma, isto 
é, dividir cada valor armazenado pelo valor máximo contido no array. 
Dessa forma, o histograma armazenará valores <i>float</i> entre 0 e 1.
</li>

</ol>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-2.7" target="new--noconvert">2.7</a> <a class="Label" name="subsec:Ajuste-dos-níveis" target="new--noconvert"> </a>Ajuste dos níveis de preto e branco
</h2>
<div class="Unindented">
Essa etapa permite realizar um ajuste final no contraste da imagem, 
fazendo com que seja possível corrigir a variação tonal já na imagem 24 
bits.
</div>
<div class="Indented">
A maioria dos programas de pintura digital oferece esse recurso, geralmente chamando <i>levels</i>.
</div>
<div class="Indented">
Veja na imagem abaixo a ferramenta numa versão do Adobe Photoshop (<a class="URL" href="https://www.cambridgeincolour.com/tutorials/levels.htm" target="new--noconvert">Cambridge In Colour - Levels</a>)
</div>
<div class="Indented">
<div class="center">
<img class="embedded" src="Visualizador%20de%20Imagens%20HDR_arquivos/levels_psex1.png" alt="figure levels_psex1.png" style="max-width: 404px; max-height: 283px;">

</div>

</div>
<div class="Indented">
O ajuste consiste em movimentar os limites inferior (nível de preto) e 
superior (nível de branco). A nossa aplicação já permite esse ajuste 
através de teclas (veja seção <a class="Reference" href="#sec:Operação-do-programa" target="new--noconvert">3↓</a>).
</div>
<div class="Indented">
Esse ajuste é armazenado nas variáveis <i>minLevel</i> e <i>maxLevel</i>, respectivamente. Elas recebem um valor de 0 a 255, sendo que <i>minLevel</i> nunca poderá ser maior que <i>maxLevel</i>.
</div>
<div class="Indented">
A fim de facilitar a visualização, foi criado um segundo histograma (variável <i>adjusted</i>), que deverá ser preenchido da mesma forma que o primeiro (original) - porém, com as intensidades ajustadas como segue:
</div>
<ol>
<li>
Inicializar o histograma de ajuste com zeros.
</li>
<li>
Passar por toda a imagem, novamente calculando a intensidade (I) de cada pixel. Calcular a <b>nova intensidade</b>, através da seguinte fórmula:<span class="MathJax_Preview">
<div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-24-Frame" tabindex="0" style="text-align: center;"><nobr><span class="math" id="MathJax-Span-507" style="width: 23.031em; display: inline-block;"><span style="display: inline-block; position: relative; width: 19.025em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.865em, 1018.97em, 4.522em, -1000em); top: -3.444em; left: 0em;"><span class="mrow" id="MathJax-Span-508"><span class="msubsup" id="MathJax-Span-509"><span style="display: inline-block; position: relative; width: 0.889em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.5em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-510" style="font-family: MathJax_Math; font-style: italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.44em;"><span class="texatom" id="MathJax-Span-511"><span class="mrow" id="MathJax-Span-512"><span class="mi" id="MathJax-Span-513" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">a</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-514" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-515" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">m</span><span class="mi" id="MathJax-Span-516" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-517" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mrow" id="MathJax-Span-518" style="padding-left: 0.167em;"><span class="mo" id="MathJax-Span-519" style="vertical-align: 0em;"><span style="font-family: MathJax_Size3;">(</span></span><span class="mn" id="MathJax-Span-520" style="font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-521" style="font-family: MathJax_Main;">,</span><span class="mfrac" id="MathJax-Span-522" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 9.936em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(3.124em, 1009.55em, 4.382em, -1000em); top: -4.701em; left: 50%; margin-left: -4.823em;"><span class="mrow" id="MathJax-Span-523"><span class="mi" id="MathJax-Span-524" style="font-family: MathJax_Math; font-style: italic;">m</span><span class="mi" id="MathJax-Span-525" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-526" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-527" style="font-family: MathJax_Main;">(</span><span class="mn" id="MathJax-Span-528" style="font-family: MathJax_Main;">0</span><span class="mo" id="MathJax-Span-529" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-530" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span class="mo" id="MathJax-Span-531" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mi" id="MathJax-Span-532" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">m</span><span class="mi" id="MathJax-Span-533" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-534" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-535" style="font-family: MathJax_Math; font-style: italic;">L</span><span class="mi" id="MathJax-Span-536" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-537" style="font-family: MathJax_Math; font-style: italic;">v</span><span class="mi" id="MathJax-Span-538" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-539" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mo" id="MathJax-Span-540" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(3.18em, 1009.78em, 4.214em, -1000em); top: -3.317em; left: 50%; margin-left: -4.908em;"><span class="mrow" id="MathJax-Span-541"><span class="mi" id="MathJax-Span-542" style="font-family: MathJax_Math; font-style: italic;">m</span><span class="mi" id="MathJax-Span-543" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-544" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-545" style="font-family: MathJax_Math; font-style: italic;">L</span><span class="mi" id="MathJax-Span-546" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-547" style="font-family: MathJax_Math; font-style: italic;">v</span><span class="mi" id="MathJax-Span-548" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-549" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mo" id="MathJax-Span-550" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mi" id="MathJax-Span-551" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">m</span><span class="mi" id="MathJax-Span-552" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-553" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-554" style="font-family: MathJax_Math; font-style: italic;">L</span><span class="mi" id="MathJax-Span-555" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-556" style="font-family: MathJax_Math; font-style: italic;">v</span><span class="mi" id="MathJax-Span-557" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-558" style="font-family: MathJax_Math; font-style: italic;">l</span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(0.887em, 1009.94em, 1.205em, -1000em); top: -1.296em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.4px solid; width: 9.936em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.076em;"></span></span></span></span><span class="mo" id="MathJax-Span-559" style="vertical-align: 0em;"><span style="font-family: MathJax_Size3;">)</span></span></span><span class="mo" id="MathJax-Span-560" style="font-family: MathJax_Main; padding-left: 0.222em;">⋅</span><span class="mn" id="MathJax-Span-561" style="font-family: MathJax_Main; padding-left: 0.222em;">255</span></span><span style="display: inline-block; width: 0px; height: 3.444em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.201em; border-left: 0px solid; width: 0px; height: 3.007em;"></span></span></nobr></span></div><script type="math/tex;mode=display" id="MathJax-Element-24">

I_{a}=min\left(1,\frac{max(0,I-minLevel)}{maxLevel-minLevel}\right)\cdot255

</script>

</span>

</li>
<li>
Aplicar a correção em todas as componentes do pixel:<span class="MathJax_Preview">
<div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-25-Frame" tabindex="0" style="text-align: center;"><nobr><span class="math" id="MathJax-Span-562" style="width: 19.458em; display: inline-block;"><span style="display: inline-block; position: relative; width: 16.055em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.865em, 1015.85em, 4.522em, -1000em); top: -3.444em; left: 0em;"><span class="mrow" id="MathJax-Span-563"><span class="mrow" id="MathJax-Span-564"><span class="mo" id="MathJax-Span-565" style=""><span style="font-family: MathJax_Main;">(</span></span><span class="msubsup" id="MathJax-Span-566"><span style="display: inline-block; position: relative; width: 1.384em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.153em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-567" style="font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-568"><span class="mrow" id="MathJax-Span-569"><span class="mn" id="MathJax-Span-570" style="font-size: 70.7%; font-family: MathJax_Main;">8</span><span class="mo" id="MathJax-Span-571" style="font-size: 70.7%; font-family: MathJax_Main;">,</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-572"><span style="display: inline-block; position: relative; width: 1.215em; height: 0px;"><span style="position: absolute; clip: rect(3.169em, 1000.76em, 4.154em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-573" style="font-family: MathJax_Math; font-style: italic;">G</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.786em;"><span class="texatom" id="MathJax-Span-574"><span class="mrow" id="MathJax-Span-575"><span class="mn" id="MathJax-Span-576" style="font-size: 70.7%; font-family: MathJax_Main;">8</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-577" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-578" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.188em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-579" style="font-family: MathJax_Math; font-style: italic;">B</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-580"><span class="mrow" id="MathJax-Span-581"><span class="mn" id="MathJax-Span-582" style="font-size: 70.7%; font-family: MathJax_Main;">8</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-583" style=""><span style="font-family: MathJax_Main;">)</span></span></span><span class="mo" id="MathJax-Span-584" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mrow" id="MathJax-Span-585" style="padding-left: 0.278em;"><span class="mo" id="MathJax-Span-586" style="vertical-align: 0em;"><span style="font-family: MathJax_Size3;">(</span></span><span class="mfrac" id="MathJax-Span-587"><span style="display: inline-block; position: relative; width: 2.197em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(3.191em, 1002.08em, 4.298em, -1000em); top: -4.68em; left: 50%; margin-left: -1.038em;"><span class="mrow" id="MathJax-Span-588"><span class="msubsup" id="MathJax-Span-589"><span style="display: inline-block; position: relative; width: 1.188em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.153em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-590" style="font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-591"><span class="mrow" id="MathJax-Span-592"><span class="mn" id="MathJax-Span-593" style="font-size: 70.7%; font-family: MathJax_Main;">8</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-594"><span style="display: inline-block; position: relative; width: 0.889em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.5em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-595" style="font-family: MathJax_Math; font-style: italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.44em;"><span class="texatom" id="MathJax-Span-596"><span class="mrow" id="MathJax-Span-597"><span class="mi" id="MathJax-Span-598" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">a</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(3.191em, 1000.5em, 4.132em, -1000em); top: -3.317em; left: 50%; margin-left: -0.252em;"><span class="mi" id="MathJax-Span-599" style="font-family: MathJax_Math; font-style: italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(0.887em, 1002.2em, 1.205em, -1000em); top: -1.296em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.4px solid; width: 2.197em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.076em;"></span></span></span></span><span class="mo" id="MathJax-Span-600" style="font-family: MathJax_Main;">,</span><span class="mfrac" id="MathJax-Span-601" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 2.224em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(3.169em, 1002.1em, 4.298em, -1000em); top: -4.68em; left: 50%; margin-left: -1.052em;"><span class="mrow" id="MathJax-Span-602"><span class="msubsup" id="MathJax-Span-603"><span style="display: inline-block; position: relative; width: 1.215em; height: 0px;"><span style="position: absolute; clip: rect(3.169em, 1000.76em, 4.154em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-604" style="font-family: MathJax_Math; font-style: italic;">G</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.786em;"><span class="texatom" id="MathJax-Span-605"><span class="mrow" id="MathJax-Span-606"><span class="mn" id="MathJax-Span-607" style="font-size: 70.7%; font-family: MathJax_Main;">8</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-608"><span style="display: inline-block; position: relative; width: 0.889em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.5em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-609" style="font-family: MathJax_Math; font-style: italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.44em;"><span class="texatom" id="MathJax-Span-610"><span class="mrow" id="MathJax-Span-611"><span class="mi" id="MathJax-Span-612" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">a</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(3.191em, 1000.5em, 4.132em, -1000em); top: -3.317em; left: 50%; margin-left: -0.252em;"><span class="mi" id="MathJax-Span-613" style="font-family: MathJax_Math; font-style: italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(0.887em, 1002.22em, 1.205em, -1000em); top: -1.296em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.4px solid; width: 2.224em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.076em;"></span></span></span></span><span class="mo" id="MathJax-Span-614" style="font-family: MathJax_Main;">,</span><span class="mfrac" id="MathJax-Span-615" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 2.197em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(3.191em, 1002.08em, 4.298em, -1000em); top: -4.68em; left: 50%; margin-left: -1.038em;"><span class="mrow" id="MathJax-Span-616"><span class="msubsup" id="MathJax-Span-617"><span style="display: inline-block; position: relative; width: 1.188em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-618" style="font-family: MathJax_Math; font-style: italic;">B</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-619"><span class="mrow" id="MathJax-Span-620"><span class="mn" id="MathJax-Span-621" style="font-size: 70.7%; font-family: MathJax_Main;">8</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-622"><span style="display: inline-block; position: relative; width: 0.889em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.5em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-623" style="font-family: MathJax_Math; font-style: italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.44em;"><span class="texatom" id="MathJax-Span-624"><span class="mrow" id="MathJax-Span-625"><span class="mi" id="MathJax-Span-626" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">a</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(3.191em, 1000.5em, 4.132em, -1000em); top: -3.317em; left: 50%; margin-left: -0.252em;"><span class="mi" id="MathJax-Span-627" style="font-family: MathJax_Math; font-style: italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(0.887em, 1002.2em, 1.205em, -1000em); top: -1.296em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.4px solid; width: 2.197em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.076em;"></span></span></span></span><span class="mo" id="MathJax-Span-628" style="vertical-align: 0em;"><span style="font-family: MathJax_Size3;">)</span></span></span></span><span style="display: inline-block; width: 0px; height: 3.444em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.201em; border-left: 0px solid; width: 0px; height: 3.007em;"></span></span></nobr></span></div><script type="math/tex;mode=display" id="MathJax-Element-25">

\left(R_{8,}G_{8},B_{8}\right)=\left(\frac{R_{8}I_{a}}{I},\frac{G_{8}I_{a}}{I},\frac{B_{8}I_{a}}{I}\right)

</script>

</span>

</li>
<li>
Neste momento, os valores de <span class="MathJax_Preview"><span class="MathJax" id="MathJax-Element-26-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-629" style="width: 6.071em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.993em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.402em, 1004.9em, 2.698em, -1000em); top: -2.281em; left: 0em;"><span class="mrow" id="MathJax-Span-630"><span class="mo" id="MathJax-Span-631" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-632"><span style="display: inline-block; position: relative; width: 1.188em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.153em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-633" style="font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-634"><span class="mrow" id="MathJax-Span-635"><span class="mn" id="MathJax-Span-636" style="font-size: 70.7%; font-family: MathJax_Main;">8</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-637" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-638" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.411em; height: 0px;"><span style="position: absolute; clip: rect(3.169em, 1000.76em, 4.154em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-639" style="font-family: MathJax_Math; font-style: italic;">G</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.786em;"><span class="texatom" id="MathJax-Span-640"><span class="mrow" id="MathJax-Span-641"><span class="mn" id="MathJax-Span-642" style="font-size: 70.7%; font-family: MathJax_Main;">8</span><span class="mo" id="MathJax-Span-643" style="font-size: 70.7%; font-family: MathJax_Main;">,</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-644"><span style="display: inline-block; position: relative; width: 1.188em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.76em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-645" style="font-family: MathJax_Math; font-style: italic;">B</span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.759em;"><span class="texatom" id="MathJax-Span-646"><span class="mrow" id="MathJax-Span-647"><span class="mn" id="MathJax-Span-648" style="font-size: 70.7%; font-family: MathJax_Main;">8</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-649" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.281em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.4em; border-left: 0px solid; width: 0px; height: 1.359em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-26">
(R_{8},G_{8,}B_{8})
</script>
</span> devem ser armazenados na imagem de saída, a variável <i>image8</i> (é um vetor de <i>unsigned char</i>, isto é, bytes sem sinal).
</li>
<li>
Atualize também o histograma de ajuste, da mesma forma que o outro, mas com a nova intensidade <span class="MathJax_Preview"><span class="MathJax" id="MathJax-Element-27-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-650" style="width: 2.025em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.679em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.316em, 1001.58em, 2.574em, -1000em); top: -2.195em; left: 0em;"><span class="mrow" id="MathJax-Span-651"><span class="mo" id="MathJax-Span-652" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-653"><span style="display: inline-block; position: relative; width: 0.889em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.5em, 4.132em, -1000em); top: -4.003em; left: 0em;"><span class="mi" id="MathJax-Span-654" style="font-family: MathJax_Math; font-style: italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -3.853em; left: 0.44em;"><span class="texatom" id="MathJax-Span-655"><span class="mrow" id="MathJax-Span-656"><span class="mi" id="MathJax-Span-657" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">a</span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span class="mo" id="MathJax-Span-658" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.195em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.355em; border-left: 0px solid; width: 0px; height: 1.314em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-27">
(I_{a})
</script>
</span>.
</li>

</ol>
<h1 class="Seção">
<a class="toc" name="toc-Seção-3" target="new--noconvert">3</a> <a class="Label" name="sec:Operação-do-programa" target="new--noconvert"> </a>Operação do programa
</h1>
<div class="Unindented">
As seguintes teclas estão disponíveis na aplicação:
</div>
<ul>
<li>
Setas esquerda/direita: reduzem e aumentam o fator de exposição.
</li>
<li>
A/S: reduzem e aumentam o nível de preto
</li>
<li>
K/L: reduzem e aumentam o nível de branco
</li>
<li>
H: exibe/oculta os histogramas
</li>

</ul>
<h1 class="Seção">
<a class="toc" name="toc-Seção-4" target="new--noconvert">4</a> Compilação e imagens de teste
</h1>
<div class="Unindented">
<b>Download do código base:</b> <a class="URL" href="https://mflash.github.io/progswb2/trab/t1-211-nklwefy6d87yhiuekrgfv/hdrvis-base.zip" target="new--noconvert">hdrvis-base.zip</a>
</div>
<div class="Indented">
Este zip contém o projeto completo para a implementação do trabalho. 
Esse código já realiza a leitura de uma imagem qualquer no formato HDF, 
bem como a exibição da imagem 24 bits na tela (mas obviamente não faz a 
conversão). O projeto pode ser compilado no Windows, Linux ou macOS, 
seguindo as instruções abaixo.
</div>
<div class="Indented">
Para a compilação no Linux, é necessário ter instalado os pacotes de 
desenvolvimento da biblioteca OpenGL. Para Ubuntu, Mint, Debian e 
derivados, instale com:
</div>
<div class="Indented">
<pre class="listing"><code class="bash hljs">sudo apt-get install freeglut3-dev
</code>
</pre>

</div>
<div class="Indented">
Para a compilação no Windows ou no macOS, não é necessário instalar mais
 nada - o compilador já vem com as bibliotecas necessárias.
</div>
<div class="Indented">
Caso você queira trocar as cores dos histogramas ou dos marcadores, edite os <i>#defines</i> no topo do módulo <b>opengl.c, </b>lembrando que as componentes são todas especificadas no intervalo <b>0...1</b>. Você pode usar este site para escolher as cores, por exemplo: <a class="URL" href="https://doc.instantreality.org/tools/color_calculator/" target="new--noconvert">instantreality 1.0 - tools - color calculator</a>. Basta selecionar a cor desejada e copiar os valores da caixa <i>RGB Normalized decimal</i> no código.
</div>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-4.1" target="new--noconvert">4.1</a> Visual Studio Code
</h2>
<div class="Unindented">
Se você estiver utilizando o Visual Studio Code, basta descompactar o zip e abrir a pasta.
</div>
<div class="Indented">
Para <b>compilar</b>: use Ctrl+Shift+B (<b>⌘</b>+Shift+B no macOS).
</div>
<div class="Indented">
Para <b>executar</b>, use F5 para usar o <i>debugger</i> ou Ctrl+F5 para executar sem o <i>debugger</i>.
</div>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-4.2" target="new--noconvert">4.2</a> Outros ambientes ou terminal
</h2>
<div class="Unindented">
Caso esteja usando outro ambiente de desenvolvimento, fornecemos um <i>Makefile</i> para Linux e macOS, e outro para Windows (<i>Makefile.mk</i>).
</div>
<div class="Indented">
Dessa forma, para compilar no Linux ou macOS, basta digitar:
</div>
<div class="Indented">
<pre class="listing"><code class="bash hljs">make
</code>
</pre>

</div>
<div class="Indented">
Se estiver utilizando o Windows, o comando é similar:
</div>
<div class="Indented">
<pre class="listing"><code class="bash hljs">mingw32-make <span class="hljs-_">-f</span> Makefile.mk
</code>
</pre>

</div>
<div class="Indented">
Alternativamente, você também pode utilizar o <i>CMake</i> (<i>Cross Platform Make</i>) para compilar pelo terminal. Para tanto, crie um diretório <i>build</i> embaixo do diretório do projeto e faça:
</div>
<div class="Indented">
<pre class="listing"><code class="bash hljs"><span class="hljs-built_in">cd</span> build
cmake ..
make -j  <span class="hljs-comment"># ou mingw32-make -j no Windows</span>
</code>
</pre>

</div>
<div class="Indented">
O arquivo <a class="URL" href="https://mflash.github.io/progswb2/trab/t1-211-nklwefy6d87yhiuekrgfv/imagens-hdf.zip" target="new--noconvert">imagens-hdf.zip</a>
 contém diversas imagens que podem ser utilizadas para testar o 
programa. Cada imagem é oferecida em duas versões: formato HDF e em 
JPEG, para conferência.
</div>
<div class="Indented">
<div class="center">
<img class="embedded" src="Visualizador%20de%20Imagens%20HDR_arquivos/images.jpg" alt="figure images.jpg" style="max-width: 851px; max-height: 426px;">

</div>

</div>
<h1 class="Seção">
<a class="toc" name="toc-Seção-5" target="new--noconvert">5</a> Avaliação
</h1>
<div class="Unindented">
Leia com atenção os critérios de avaliação:
</div>
<ul>
<li>
Pontuação:<ul>
<li>
Extração da largura e altura da imagem: 1 ponto.
</li>
<li>
Decodificação da imagem: 1,5 pontos.
</li>
<li>
Aplicação do fator de exposição: 1 ponto.
</li>
<li>
Algoritmo de tone mapping: 1,5 pontos.
</li>
<li>
Conversão para 24 bits: 1 ponto.
</li>
<li>
Criação do histograma original: 1,5 pontos.
</li>
<li>
Criação do histograma ajustado: 1 ponto.
</li>
<li>
Ajuste dos níveis de preto e branco: 1,5 pontos.
</li>

</ul>

</li>
<li>
Os trabalhos são <b>em duplas ou individuais</b>. A pasta do projeto deve ser compactada em um arquivo .zip e este deve ser submetido pelo <i>Moodle</i> até a data e hora especificadas.
</li>
<li>
Não envie .rar, .7z, .tar.gz - apenas .zip.
</li>
<li>
O código deve estar identado corretamente.
</li>
<li>
<b>A cópia parcial ou completa do trabalho terá como conseqüência a 
atribuição de nota ZERO ao trabalho dos alunos envolvidos. A verificação
 de cópias é feita inclusive entre turmas.</b>
</li>
<li>
<b>A cópia de código ou algoritmos existentes da Internet também não é permitida</b>.
 Se alguma idéia encontrada na rede for utilizada na implementação, sua 
descrição e referência deve constar no início do código-fonte, como um 
comentário.
</li>

</ul>

<hr class="footer">
<div class="footer" id="generated-by">
Document generated by <a href="http://elyxer.nongnu.org/">eLyXer 1.2.5 (2013-03-10)</a> on <span class="create-date">2021-04-09T17:59:16.945981</span>
</div>
</div>


<div style="position: absolute; width: 0px; height: 0px; overflow: hidden; padding: 0px; border: 0px none; margin: 0px;"><div id="MathJax_Font_Test" style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; min-width: 0px; max-width: none; padding: 0px; border: 0px none; margin: 0px; white-space: nowrap; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: normal; font-size-adjust: none; font-family: MathJax_Size3, sans-serif;"></div></div></body></html>